<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Flappy Photo Game</title>

<style>
body{
margin:0;
overflow:hidden;
background:black;
}

canvas{
display:block;
}
</style>

</head>

<body>

<canvas id="gameCanvas"></canvas>
<audio id="bgm" src="music.mp3" loop></audio>

<script>

let canvas=document.getElementById("gameCanvas");
let ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let bird=new Image();
bird.src="img1.png";

let bgm=document.getElementById("bgm");

let x=60;
let y;
let velocity=0;
let gravity=0.4;
let lift=-6;

let pipes=[];
let score=0;
let gameOver=false;

function resetGame(){
y=canvas.height/2;
velocity=0;
pipes=[];
score=0;
gameOver=false;
}

document.onclick=()=>{
if(gameOver){
resetGame();
update();
}else{
velocity=lift;
bgm.play();
}
};

function drawBird(){
ctx.drawImage(bird,x,y,70,70);
}

function drawPipe(pipe){
ctx.fillStyle="green";
ctx.fillRect(pipe.x,0,50,pipe.top);
ctx.fillRect(pipe.x,pipe.bottom,50,canvas.height);
}

function update(){

ctx.clearRect(0,0,canvas.width,canvas.height);

velocity+=gravity;
y+=velocity;

drawBird();

if(Math.random()<0.008){

let gap=320;

let top=Math.random()*(canvas.height-gap-150)+75;

pipes.push({
x:canvas.width,
top:top,
bottom:top+gap
});
}

for(let i=0;i<pipes.length;i++){

pipes[i].x-=1;

drawPipe(pipes[i]);

if(
x+70>pipes[i].x &&
x<pipes[i].x+50 &&
(y<pipes[i].top || y+70>pipes[i].bottom)
){
gameOver=true;
}

if(pipes[i].x==60){
score++;
}
}

ctx.fillStyle="white";
ctx.font="25px Arial";
ctx.fillText("Score: "+score,20,40);

if(y>canvas.height || y<0){
gameOver=true;
}

if(!gameOver){
requestAnimationFrame(update);
}else{
ctx.fillText("Game Over",canvas.width/2-60,canvas.height/2);
ctx.fillText("Tap to Restart",canvas.width/2-70,canvas.height/2+40);
}
}

resetGame();
update();

</script>

</body>
</html>
