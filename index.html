<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<style>
body{margin:0;overflow:hidden;font-family:Arial;background:black;}
canvas{display:block;}

#startScreen,#gameOverScreen{
position:absolute;
top:0;left:0;
width:100%;
height:100%;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
background:rgba(0,0,0,0.5);
color:white;
}

button{
padding:15px 40px;
font-size:20px;
border:none;
border-radius:30px;
}
</style>
</head>

<body>

<div id="startScreen">
<h2>PRESS TAP TO FLY</h2>
<img src="img1.png" width="120">
<br><br>
<button onclick="startGame()">START GAME</button>
</div>

<div id="gameOverScreen" style="display:none;">
<h1>Game Over</h1>
<h2 id="finalScore"></h2>
<h3 id="bestScore"></h3>
<button onclick="restartGame()">TRY AGAIN</button>
</div>

<canvas id="game"></canvas>

<audio id="startSound" src="start.mp3"></audio>
<audio id="jumpSound" src="jump.mp3"></audio>
<audio id="overSound" src="gameover.mp3"></audio>

<script>

let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let bird=new Image();
bird.src="img1.png";

let pipe=new Image();
pipe.src="img2.png";

let bg=new Image();
bg.src="bg.png";

let startS=document.getElementById("startSound");
let jumpS=document.getElementById("jumpSound");
let overS=document.getElementById("overSound");

let x=80,y,vel=0;
let gravity=0.6;
let lift=-10;
let pipes=[];
let gap=350;
let pipeWidth=90;
let speed=4;
let frame=0;
let score=0;
let best=localStorage.getItem("best")||0;
let gameOver=false;
let started=false;

function startGame(){
document.getElementById("startScreen").style.display="none";
startS.play();
started=true;
update();
}

function restartGame(){
document.getElementById("gameOverScreen").style.display="none";
reset();
update();
}

function reset(){
y=canvas.height/2;
vel=0;
pipes=[];
score=0;
frame=0;
gameOver=false;
}

document.addEventListener("click",()=>{
if(!started)return;
vel=lift;
jumpS.currentTime=0;
jumpS.play();
});

function drawBird(){
ctx.save();
ctx.translate(x+30,y+30);
ctx.rotate(vel*0.05);
ctx.drawImage(bird,-30,-30,60,60);
ctx.restore();
}

function drawPipe(p){
let pattern=ctx.createPattern(pipe,"repeat-y");
ctx.fillStyle=pattern;
ctx.fillRect(p.x,0,pipeWidth,p.top);
ctx.fillRect(p.x,p.bottom,pipeWidth,canvas.height);
}

function update(){

ctx.drawImage(bg,0,0,canvas.width,canvas.height);

vel+=gravity;
y+=vel;
drawBird();

frame++;

if(frame%100==0){
let top=Math.random()*(canvas.height-gap-200)+100;
pipes.push({
x:canvas.width,
top:top,
bottom:top+gap,
scored:false
});
}

for(let i=0;i<pipes.length;i++){

pipes[i].x-=speed;
drawPipe(pipes[i]);

if(x+50>pipes[i].x &&
x<pipes[i].x+pipeWidth &&
(y<pipes[i].top||y+50>pipes[i].bottom)){
gameOver=true;
}

if(!pipes[i].scored && pipes[i].x+pipeWidth<x){
score++;
pipes[i].scored=true;
}
}

ctx.fillStyle="white";
ctx.font="28px Arial";
ctx.fillText("Score:"+score,20,40);

if(y>canvas.height||y<0){
gameOver=true;
}

if(!gameOver){
requestAnimationFrame(update);
}
else{
overS.play();
if(score>best){
best=score;
localStorage.setItem("best",best);
}
document.getElementById("gameOverScreen").style.display="flex";
document.getElementById("finalScore").innerText="Score:"+score;
document.getElementById("bestScore").innerText="Best:"+best;
}

}

reset();

</script>

</body>
</html>
