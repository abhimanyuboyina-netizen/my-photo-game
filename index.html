<!DOCTYPE html>
<html>
<head>
<title>Flappy Photo Game</title>
<style>
body{
margin:0;
overflow:hidden;
background:black;
}
canvas{
display:block;
margin:auto;
background:#111;
}
</style>
</head>

<body>

<canvas id="gameCanvas" width="400" height="600"></canvas>
<audio id="bgm" src="music.mp3" loop></audio>

<script>

let canvas=document.getElementById("gameCanvas");
let ctx=canvas.getContext("2d");

let bird=new Image();
bird.src="img1.png";

let bgm=document.getElementById("bgm");

let x=50;
let y=200;
let gravity=0.5;
let velocity=0;
let lift=-8;

let pipes=[];
let score=0;
let gameOver=false;

document.onclick=()=>{
velocity=lift;
bgm.play();
};

function drawBird(){
ctx.drawImage(bird,x,y,60,60);
}

function drawPipe(pipe){
ctx.fillStyle="green";
ctx.fillRect(pipe.x,0,60,pipe.top);
ctx.fillRect(pipe.x,pipe.bottom,60,600);
}

function update(){
ctx.clearRect(0,0,400,600);

velocity+=gravity;
y+=velocity;

drawBird();

if(Math.random()<0.02){
let top=Math.random()*200+50;
let gap=150;
pipes.push({x:400,top:top,bottom:top+gap});
}

for(let i=0;i<pipes.length;i++){
pipes[i].x-=2;
drawPipe(pipes[i]);

if(
x+60>pipes[i].x &&
x<pipes[i].x+60 &&
(y<pipes[i].top || y+60>pipes[i].bottom)
){
gameOver=true;
}

if(pipes[i].x==0){
score++;
}
}

ctx.fillStyle="white";
ctx.font="20px Arial";
ctx.fillText("Score: "+score,10,30);

if(y>600 || y<0){
gameOver=true;
}

if(!gameOver){
requestAnimationFrame(update);
}else{
ctx.fillText("Game Over",150,300);
}
}

update();

</script>

</body>
</html>
